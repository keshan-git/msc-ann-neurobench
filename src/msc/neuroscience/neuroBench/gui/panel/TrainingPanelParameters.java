package msc.neuroscience.neuroBench.gui.panel;

import msc.neuroscience.neuroBench.core.activationfunction.ActivationFunction;
import msc.neuroscience.neuroBench.core.activationfunction.SigmoidActivationFunction;
import msc.neuroscience.neuroBench.core.activationfunction.ThresholdActivationFunction;

/**
 *
 * @author Keshan De Silva
 */
public class TrainingPanelParameters extends javax.swing.JPanel
{
    private double learningRate;
    private double acceptanceLevel;
    
    public TrainingPanelParameters()
    {
        initComponents();
    }

    public double getLearningRate()
    {
        this.learningRate = (Double)spinnerLearningRate.getValue();
        return learningRate;
    }

    public void setLearningRate(double learningRate)
    {
        this.learningRate = learningRate;
        spinnerLearningRate.setValue(learningRate);
    }

    public double getAcceptanceLevel()
    {
        this.acceptanceLevel = (Double)spinnerAcceptanceLevel.getValue();
        return acceptanceLevel;
    }

    public void setAcceptanceLevel(double acceptanceLevel)
    {
        this.acceptanceLevel = acceptanceLevel;
        spinnerAcceptanceLevel.setValue(learningRate);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents()
    {

        lblThreashold = new javax.swing.JLabel();
        spinnerLearningRate = new javax.swing.JSpinner();
        lblAlpha = new javax.swing.JLabel();
        spinnerAcceptanceLevel = new javax.swing.JSpinner();

        lblThreashold.setText("Learning Rate : ");

        spinnerLearningRate.setModel(new javax.swing.SpinnerNumberModel(Double.valueOf(0.2d), Double.valueOf(0.0d), null, Double.valueOf(0.01d)));

        lblAlpha.setText("Acceptable Error Level : ");

        spinnerAcceptanceLevel.setModel(new javax.swing.SpinnerNumberModel(Double.valueOf(0.05d), null, null, Double.valueOf(0.01d)));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblThreashold)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(spinnerLearningRate, javax.swing.GroupLayout.DEFAULT_SIZE, 51, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblAlpha)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(spinnerAcceptanceLevel)))
                .addContainerGap())
        );

        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {lblAlpha, lblThreashold});

        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThreashold)
                    .addComponent(spinnerLearningRate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblAlpha)
                    .addComponent(spinnerAcceptanceLevel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {lblThreashold, spinnerLearningRate});

        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {lblAlpha, spinnerAcceptanceLevel});

    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel lblAlpha;
    private javax.swing.JLabel lblThreashold;
    private javax.swing.JSpinner spinnerAcceptanceLevel;
    private javax.swing.JSpinner spinnerLearningRate;
    // End of variables declaration//GEN-END:variables

    public void setActivationFunction(ActivationFunction activationFunction)
    {
        spinnerAcceptanceLevel.setEnabled(false);
        spinnerLearningRate.setEnabled(false);
        
        if (activationFunction instanceof ThresholdActivationFunction)
        {
            spinnerLearningRate.setEnabled(true);
            spinnerLearningRate.setValue(((ThresholdActivationFunction)activationFunction).getThresholdValue());
        }
        else if (activationFunction instanceof SigmoidActivationFunction)
        {
            spinnerAcceptanceLevel.setEnabled(true);
            spinnerAcceptanceLevel.setValue(((SigmoidActivationFunction)activationFunction).getAlpha());
        }
    }

    public void setLearningRateVisible(boolean flag)
    {
        lblAlpha.setVisible(flag);
        spinnerAcceptanceLevel.setVisible(flag);
    }
}
